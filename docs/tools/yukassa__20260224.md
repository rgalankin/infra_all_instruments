---
id: 20260224-yukassa
title: "ЮKassa (YooKassa)"
summary: >
  Платёжная система для приёма онлайн-платежей. Банковские карты, СБП, электронные
  кошельки, Apple/Google Pay. SDK для Python. Скрипт yukassa-payment.py написан.
  Ожидается регистрация магазина от CEO.
type: spec
status: pending
tags: [eng/api, biz/payments, eng/integration, platform/yukassa]
source: kb-manager
ai_weight: normal
created: 2026-02-24
updated: 2026-02-24
category: "API -> Payments"
criticality: high
platform: cross-platform
cost: "transaction-based"
---
# ЮKASSA (YOOKASSA)

## ОСНОВНАЯ ИНФОРМАЦИЯ

- **Категория:** API - Payments
- **Статус:** pending (ожидается регистрация магазина от CEO)
- **Критичность:** высокая (приём онлайн-платежей от клиентов)
- **Назначение:** приём онлайн-платежей: банковские карты, СБП, электронные кошельки, Apple/Google Pay
- **Платформа:** cross-platform (REST API, SDK)
- **Сайт:** https://yookassa.ru
- **API:** https://api.yookassa.ru/v3/
- **Документация:** https://yookassa.ru/developers/

## ПОДКЛЮЧЕНИЕ

- **Auth:** Basic Auth (shopId + secretKey)
- **Credentials:** `.secrets/yukassa.json` (ожидается)
- **Env variables:**
  - `YUKASSA_SHOP_ID` - ID магазина
  - `YUKASSA_SECRET_KEY` - секретный ключ
- **SDK:** `pip install yookassa`

## ENDPOINTS (REST API v3)

| Метод | Endpoint | Описание |
|-------|----------|----------|
| POST | `/v3/payments` | Создать платёж |
| GET | `/v3/payments/{id}` | Получить информацию о платеже |
| POST | `/v3/payments/{id}/capture` | Подтвердить платёж |
| POST | `/v3/payments/{id}/cancel` | Отменить платёж |
| GET | `/v3/payments` | Список платежей |
| POST | `/v3/refunds` | Создать возврат |
| GET | `/v3/refunds/{id}` | Информация о возврате |

## СПОСОБЫ ОПЛАТЫ

| Способ | Описание |
|--------|----------|
| bank_card | Банковские карты (Visa, MC, МИР) |
| sbp | Система быстрых платежей |
| yoo_money | ЮMoney (электронный кошелёк) |
| sberbank | Сбербанк Онлайн |
| tinkoff_bank | Тинькофф |
| apple_pay | Apple Pay |
| google_pay | Google Pay |
| qiwi | QIWI Кошелёк |

## СКРИПТ

**Путь:** `~/Documents/ai_agents/scripts/yukassa-payment.py`

**Зависимости:** Python 3, yookassa SDK (`pip install yookassa`)

```bash
# Создать платёж
python3 scripts/yukassa-payment.py --action create --amount 5000 --description "Оплата консультации" --return-url "https://credoserv.ru/success"

# Проверить статус платежа
python3 scripts/yukassa-payment.py --action status --payment-id <UUID>

# Список платежей
python3 scripts/yukassa-payment.py --action list --limit 10
```

## СТОИМОСТЬ

Комиссия за транзакцию:
- Банковские карты: от 2.8%
- СБП: 0.4%
- ЮMoney: от 2%
- Apple/Google Pay: от 2.8%

Подключение бесплатно. Нет абонентской платы.

## СЦЕНАРИИ ИСПОЛЬЗОВАНИЯ

### P0: Приём оплаты за услуги
- Генерация ссылки на оплату из CRM
- Отправка клиенту (WhatsApp, Telegram, email)
- Автоматическое обновление статуса сделки

### P1: Рекуррентные платежи
- Помесячная оплата сопровождения банкротства
- Автоматическое выставление счетов

## СВЯЗИ

### Альтернативы
- **Точка Банк API** - платёжные ссылки через банк (уже подключается)

### Интеграции
- **Bitrix24 CRM** - привязка к сделкам
- **n8n** - webhook-уведомления о платежах
- **Sales Agent (Максим)** - генерация ссылок в воронке продаж

### Зависимости
- Требует: зарегистрированный магазин в ЮKassa (shopId + secretKey)
- Ключ хранится: `.secrets/yukassa.json`

## Links (internal)

- [[infra_all_instruments/registry__20260210220000-01|Registry]]
- [[infra_all_instruments/docs/tools/_index__20260210220000-04|Реестр инструментов]]
- [[infra_all_instruments/docs/tools/tochka-bank__20260224|Точка Банк (альтернатива)]]

## ИСТОРИЯ

- 2026-02-24: Создана карточка. Скрипт написан, ожидается регистрация магазина.
