---
id: 20260213140000-01
title: "План оптимизации инфраструктуры v1"
summary: >
  Комплексный план: интеграция AI-агентов и скриптов AgentOps в базу знаний,
  оптимизация дублирующих инструментов, новые связи, рекомендации по развитию.
type: spec
status: archived
tags: [content/analytics, ai/analysis, process/план]
source: claude-opus-4-6
ai_weight: high
created: 2026-02-13
updated: 2026-02-13
---
# ПЛАН ОПТИМИЗАЦИИ ИНФРАСТРУКТУРЫ v1

> Дата: 2026-02-13
> Метод: глубокий AI-анализ 4 слоёв: infra_all_instruments, ai_agents, AgentOps, перекрёстные связи
> Статус: **ВЫПОЛНЕНО** (2026-02-13)

---

## РЕЗЮМЕ

Выявлено **5 направлений оптимизации**, разбитых на 18 конкретных задач.

| # | Направление | Задач | Приоритет |
|---|------------|:-----:|:---------:|
| 1 | AI-агенты → база знаний | 4 | Высокий |
| 2 | Скрипты AgentOps → база знаний | 3 | Высокий |
| 3 | Новые связи и интеграции | 4 | Средний |
| 4 | Оптимизация дублирующих инструментов | 4 | Средний |
| 5 | Устранение пробелов в документации | 3 | Низкий |

---

## ФАЗА 1: AI-АГЕНТЫ → БАЗА ЗНАНИЙ

### Контекст

Проект `ai_agents/` содержит 2 активных агента (Chief of Staff, Personal Assistant) и 5 запланированных (HR, Sales, Marketing, SysAdmin, DevOps). Директория `ai_agents/docs/agents/` заявлена в README, но пуста. В infra_all_instruments агенты не упоминаются.

### Принцип

- **Source of truth** реестра агентов → `ai_agents/docs/agents/_index.md`
- **infra_all_instruments** → только секция-указатель в registry
- **Нет дублирования** — карточки агентов живут в ai_agents, инструментарий ссылается

### Задачи

#### 1.1 Создать реестр агентов в ai_agents

**Файл:** `ai_agents/docs/agents/_index.md`

Содержание:
- Таблица всех агентов (имя, статус, назначение, расположение)
- Ссылки на карточки каждого агента
- Общая архитектура коммуникации (JSON-RPC over filesystem)
- Ссылка на shared/ (базовый фреймворк)

Формат: YAML frontmatter по стандарту DocOps, wikilinks на карточки.

#### 1.2 Создать карточки агентов в ai_agents/docs/agents/

Для каждого агента — отдельная карточка:

| Агент | Файл | Статус карточки |
|-------|------|:---------------:|
| Chief of Staff | `chief-of-staff.md` | Создать (данные из agents/chief_of_staff/AGENTS.md) |
| Personal Assistant | `personal-assistant.md` | Создать (данные из personal_assistant/README.md) |
| HR Agent | `hr-agent.md` | Создать (status: draft, roadmap) |
| Sales Agent | `sales-agent.md` | Создать (status: draft, roadmap) |
| Marketing Agent | `marketing-agent.md` | Создать (status: draft, roadmap) |
| SysAdmin Agent | `sysadmin-agent.md` | Создать (status: draft, roadmap) |
| DevOps Agent | `devops-agent.md` | Создать (status: draft, roadmap) |

Шаблон карточки (создать `ai_agents/docs/agents/template-agent-card.md`):
- Основная информация (назначение, статус, интерфейсы)
- Возможности (что умеет)
- Интеграции (с какими инструментами/агентами связан)
- Технологический стек
- Ссылка на операционный AGENTS.md (если есть)

**Важно:** Карточка — это описание для базы знаний (что агент делает, с чем связан). Операционный AGENTS.md в `agents/<name>/` — это инструкции для агента (как себя вести). Они не дублируют друг друга.

#### 1.3 Добавить секцию «AI-агенты» в registry infra_all_instruments

**Файл:** `infra_all_instruments/registry__20260210220000-01.md`

Добавить после секции «MCP-серверы»:

```markdown
## AI-АГЕНТЫ

Специализированные AI-агенты для автоматизации бизнес-процессов.

→ [[ai_agents/docs/agents/_index|Реестр AI-агентов]]

| Агент | Назначение | Статус |
|-------|-----------|--------|
| Chief of Staff | Координация задач, приоритизация, делегирование | Активен |
| Personal Assistant | Telegram-бот, голосовой ввод, daily digest | MVP |
| HR / Sales / Marketing / SysAdmin / DevOps | Специализированные агенты | Roadmap |
```

#### 1.4 Обновить карту интеграций

**Файл:** `infra_all_instruments/docs/integrations/_index__20260210220000-07.md`

Добавить потоки:
```
AI Agents (JSON-RPC) ↔ Telegram Bot (aiogram)
AI Agents → Claude API (NLU)
AI Agents → Whisper API (ASR)
AI Agents → AgentOps (DocOps стандарт)
Chief of Staff → другие агенты (делегирование)
```

---

## ФАЗА 2: СКРИПТЫ AGENTOPS → БАЗА ЗНАНИЙ

### Контекст

В AgentOps/script-center/registry.yml зарегистрирован 31 скрипт, 9 цепочек автоматизации. В infra_all_instruments упомянуты только 2 скрипта из AgentOps (docops-lint, normalize-tags) и 6 локальных скриптов. Расхождение значительное.

### Принцип

- **Source of truth** реестра скриптов → `AgentOps/script-center/registry.yml`
- **infra_all_instruments** → секция-указатель + перечень ключевых скриптов, используемых в этом проекте
- Локальные скрипты (mcp-sync.mjs, inventory-check.sh и др.) остаются в infra_all_instruments/scripts/

### Задачи

#### 2.1 Добавить секцию «Скрипты и автоматизация» в registry

**Файл:** `infra_all_instruments/registry__20260210220000-01.md`

Добавить после секции «AI-агенты»:

```markdown
## СКРИПТЫ И АВТОМАТИЗАЦИЯ

Утилиты, линтеры, валидаторы — мини-приложения для управления инфраструктурой.

### Локальные (этот проект)
→ [[infra_all_instruments/docs/automation/_index__20260210220000-08|Автоматизация]]

| Скрипт | Назначение |
|--------|-----------|
| mcp-sync.mjs | Синхронизация MCP-конфигов |
| inventory-check.sh | Аудит покрытия инструментов |
| generate-stats.sh | Статистика базы знаний |
| link-checker.sh | Валидация wikilinks |
| yaml-validate.sh | Валидация YAML frontmatter |
| freshness-check.sh | Проверка свежести карточек |

### AgentOps (кросс-проектные)
→ [[AgentOps/script-center/registry.yml|Реестр скриптов AgentOps]] (31 скрипт, 9 цепочек)

Ключевые для этого проекта:
| Скрипт | Назначение | Расписание |
|--------|-----------|-----------|
| docops-lint.py | Валидация YAML-заголовков | Ежедневно 9:00 |
| normalize-tags.py | Нормализация тегов | Каждый час |
| placeholder-scan.py | Поиск незаполненных заглушек | Вручную |
| health-monitor.py | Мониторинг здоровья скриптов | Вручную |
```

#### 2.2 Обновить docs/automation/_index

**Файл:** `infra_all_instruments/docs/automation/_index__20260210220000-08.md`

Добавить раздел «Кросс-проектные скрипты» со ссылкой на AgentOps и пояснением, какие скрипты оттуда используются в этом проекте.

#### 2.3 Синхронизировать MCP-каталоги

**Проблема:** В infra_all_instruments описаны 16 MCP-серверов, в AgentOps/mcp-hub/catalog.yml — 18. Расхождение на 2 сервера.

**Действие:** Сверить списки, обновить infra_all_instruments/docs/mcp/_index до актуального состояния. Source of truth для конфигурации MCP → AgentOps/mcp-hub/catalog.yml. Source of truth для описания MCP → infra_all_instruments/docs/mcp/cards/.

---

## ФАЗА 3: НОВЫЕ СВЯЗИ И ИНТЕГРАЦИИ

### Контекст

Выявлены разрывы между слоями инфраструктуры:
- AI-агенты не связаны с MCP-серверами (а могли бы использовать)
- Скрипты AgentOps не отражены в графе интеграций
- Claude Code не имеет MCP-серверов (0 из 18)

### Задачи

#### 3.1 Добавить AI-агентов в карту интеграций

Новые потоки данных для документа data-flows:
```
Chief of Staff → Telegram Bot → CEO (задачи, дайджесты)
Personal Assistant → Whisper API → NLU (Claude) → Action Router
AI Agents ↔ AgentOps Project Coordinator
AI Agents → PostgreSQL + Qdrant + Redis (shared infra)
```

#### 3.2 Добавить Claude Code в реестр инструментов

**Проблема:** Claude Code — один из основных инструментов разработки (используется прямо сейчас), но НЕ имеет карточки в docs/tools/ и не упоминается в реестре инструментов.

**Действие:** Создать карточку Tier 1 для Claude Code в docs/tools/.

#### 3.3 Выявить новые эффективные связки

На основе анализа — **5 новых связок** (дополнение к 12 из integration-opportunities):

| # | Связка | Ценность | Статус |
|---|--------|---------|--------|
| 1 | Claude Code ↔ MCP-серверы (настроить как для Cursor) | Высокая | Не реализовано |
| 2 | AI Agents ↔ n8n (агенты вызывают n8n воркфлоу) | Высокая | Не реализовано |
| 3 | AgentOps health-monitor → Telegram Alert (через n8n) | Средняя | Не реализовано |
| 4 | infra_all_instruments freshness-check → AgentOps event-processor | Средняя | Не реализовано |
| 5 | AI Agents → Obsidian (обновление базы знаний через агентов) | Высокая | Не реализовано |

#### 3.4 Определить связи для отказа

Связи, которые **не стоит реализовывать** или от которых отказаться:

| Связка | Причина отказа |
|--------|---------------|
| Bitwarden MCP | Риск безопасности превышает ценность |
| Opera VPN ↔ инфраструктура | Дублирует WireGuard/ShadowsocksX, не нужен |
| Dify ↔ локальные Ollama модели | Латентность через VPS слишком высокая, лучше OpenRouter |

---

## ФАЗА 4: ОПТИМИЗАЦИЯ ДУБЛИРУЮЩИХ ИНСТРУМЕНТОВ

### 4.1 PDF-редакторы: оставить 2 из 4

| Действие | Инструмент | Обоснование |
|---------|-----------|-------------|
| **Оставить** | Foxit PDF Editor | Основной, полнофункциональный |
| **Оставить** | Exporter | Узкая ниша — конвертация форматов |
| **Удалить** | PDFelement | Полностью дублирует Foxit |
| **Удалить** | UPDF | Дублирует Foxit, AI-функции не уникальны |

**Экономия:** ~2 GB дискового пространства.

### 4.2 Браузеры: определить роли для 6

| Роль | Браузер | Действие |
|------|---------|---------|
| Основной (ежедневный) | Chrome | Оставить — DevTools, расширения, Claude in Chrome |
| Тестирование (другой движок) | Firefox | Оставить — Gecko для кросс-браузерного тестирования |
| Системный | Safari | Оставить — macOS нативный, не удаляется |
| AI-браузер | Comet | Оставить на мониторинге — оценить через месяц |
| **Удалить** | Yandex Browser | Blink-клон Chrome, нет уникальных функций |
| **Удалить** | Opera | Blink-клон Chrome, VPN заменён WireGuard/ShadowsocksX |

### 4.3 Мессенджеры: карта «кто для чего»

Удалять мессенджеры нельзя — они привязаны к аудитории. Но нужно чёткое разделение:

| Мессенджер | Аудитория | Статус |
|-----------|----------|--------|
| Telegram | Личные + автоматизация (n8n, боты, AI) | **Основной** |
| WhatsApp | Клиенты (международные) | Обязательный |
| Megafon | Корпоративная связь (телефония) | Обязательный |
| Slack | IT-сообщества | **Пересмотреть** — если нет активных workspace, удалить |
| Yandex Messenger | Контрагенты Яндекс-экосистемы | **Пересмотреть** — нужен ли? |
| Telemost | Видеозвонки (Яндекс) | **Пересмотреть** — заменим Zoom? |

**Рекомендация:** Обновить карточки Slack, Yandex Messenger, Telemost — добавить поле «активность использования» и принять решение через месяц.

### 4.4 IDE: сфокусировать стек

| IDE | Роль | Действие |
|-----|------|---------|
| Cursor | Основной AI-IDE, 15 MCP серверов | **Основной** |
| Claude Code | AI CLI, работает из терминала | **Основной** (добавить карточку!) |
| Continue | AI-слой поверх IDE | Дополняет, не дублирует |
| Sublime Text | Быстрое редактирование больших файлов | Оставить |
| VS Code | Запасной | **Пересмотреть** — если нет уникальных расширений, удалить |
| TextMate | Системный macOS | Можно игнорировать |

---

## ФАЗА 5: УСТРАНЕНИЕ ПРОБЕЛОВ

### 5.1 Заполнить заглушки

| Файл / Секция | Проблема | Действие |
|---------------|---------|---------|
| ai_agents/ARCHITECTURE.md | Заглушка (placeholder) | Заполнить на основе README и структуры |
| VLM (by-type) | Заглушка в нейросетях | Заполнить или удалить |
| Image-gen (by-type) | Заглушка в нейросетях | Заполнить или удалить |

### 5.2 Обновить устаревшие карточки

| Карточка | Проблема | Действие |
|---------|---------|---------|
| tesseract-ocr__20260201200225 | Старая схема (01.02) | Обновить frontmatter по текущему стандарту |
| paddleocr__20260201200225 | Старая схема (01.02) | Обновить frontmatter по текущему стандарту |

### 5.3 Добавить отсутствующее

| Элемент | Где | Действие |
|---------|-----|---------|
| Claude Code | docs/tools/ | Создать карточку Tier 1 |
| Groq runtime | docs/neural-networks/by-runtime/ | Создать карточку рантайма |
| Warp AI | docs/tools/warp карточка | Добавить секцию Warp AI (встроенный AI) |

---

## ПОРЯДОК ВЫПОЛНЕНИЯ

```
Фаза 1 (AI-агенты)          ████████░░  Неделя 1
  1.1 Реестр в ai_agents      ██
  1.2 Карточки агентов         ████
  1.3 Секция в registry        █
  1.4 Обновить интеграции      █

Фаза 2 (Скрипты)            ████░░░░░░  Неделя 1
  2.1 Секция в registry        █
  2.2 Обновить automation      █
  2.3 Синхронизация MCP        ██

Фаза 3 (Связи)              ██████░░░░  Неделя 2
  3.1 Агенты в интеграциях     ██
  3.2 Карточка Claude Code     ██
  3.3 Новые связки             █
  3.4 Отказ от связей          █

Фаза 4 (Оптимизация)        ████░░░░░░  Неделя 2
  4.1-4.4 Решения + обновления ████

Фаза 5 (Пробелы)            ████░░░░░░  Неделя 3
  5.1-5.3 Заглушки, карточки   ████
```

**Завершено:** 2026-02-13. Status изменён на `archived`.

---

## Links (internal)

- [[infra_all_instruments/registry__20260210220000-01|Registry]]
- [[infra_all_instruments/docs/analytics/_index__20260210220000-09|Аналитика]]
- [[infra_all_instruments/docs/analytics/redundancy-audit__20260211130000-01|Аудит дублирования]]
- [[infra_all_instruments/docs/analytics/integration-opportunities__20260211130000-03|Возможности интеграции]]
- [[infra_all_instruments/docs/integrations/_index__20260210220000-07|Карта интеграций]]
- [[ai_agents/README|AI Agents проект]]
- [[AgentOps/script-center/registry.yml|Реестр скриптов AgentOps]]

## История

- 2026-02-13: Выполнены все 5 фаз плана оптимизации (Claude Opus 4.6)
- 2026-02-13: Создан план оптимизации на основе глубокого анализа 4 слоёв инфраструктуры
