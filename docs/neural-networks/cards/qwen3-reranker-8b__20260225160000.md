---
id: 20260225160000
title: "Qwen3-Reranker-8B"
status: active
source: system_process_architect
tags: [ai/reranking, ai/model-card]
type: note
summary: "Карточка reranker-модели Qwen3-Reranker-8B (Alibaba/Qwen): 8B параметров, cross-encoder reranking для RAG-пайплайна"
ai_weight: high
created: 2026-02-25
updated: 2026-02-25
---

# Qwen3-Reranker-8B

## Основные характеристики

| Параметр | Значение |
|----------|----------|
| Разработчик | Alibaba / Qwen |
| Параметры | 8B |
| Тип | Cross-encoder reranker |
| Контекст | 32768 tokens |
| Лицензия | Apache-2.0 |
| Мультиязычность | 100+ языков |
| Формат входа | query + document pairs |
| Формат выхода | relevance scores (0..1) |

## Зачем нужен Reranker

Embedding-поиск находит "похожие по смыслу" документы. Reranker определяет "отвечает ли документ на конкретный вопрос". Разница существенная.

**Пример:**
- Запрос: "сколько стоит банкротство через МФЦ?"
- Embedding находит документы со словами "банкротство", "МФЦ", "стоимость"
- Reranker из них выбирает только тот, где реально написана цена через МФЦ

## Критическое правило

Embedding-модель и Reranker ОБЯЗАНЫ быть от одного провайдера. Qwen3-Embedding-8B + Qwen3-Reranker-8B = единая пара. Смешивание провайдеров деградирует качество.

## Доступные провайдеры

| Провайдер | Endpoint | Цена | Статус |
|-----------|----------|------|--------|
| **DeepInfra** | `api.deepinfra.com/v1/inference/Qwen/Qwen3-Reranker-8B` | $0.05/1M | **КАНОНИЧЕСКИЙ** |
| Fireworks AI | `api.fireworks.ai/inference/v1/rerank` | $0.10/1M | Reserve |
| SiliconFlow | `api.siliconflow.com/v1/rerank` | ~$0.02/1M | Discontinued (403) |

## Форматы API

### DeepInfra (нативный формат)

```json
POST /v1/inference/Qwen/Qwen3-Reranker-8B
{
  "queries": ["запрос пользователя"],
  "passages": ["документ 1", "документ 2", "документ 3"]
}
// Response: {"scores": [0.95, 0.23, 0.87]}
```

### Fireworks AI (OpenAI-совместимый)

```json
POST /inference/v1/rerank
{
  "model": "accounts/fireworks/models/qwen3-reranker-8b",
  "query": "запрос пользователя",
  "documents": ["документ 1", "документ 2", "документ 3"]
}
// Response: {"results": [{"index": 0, "relevance_score": 0.95}, ...]}
```

**Автодетект:** mcp-kb-server.py определяет формат автоматически по наличию `scores` или `results` в ответе.

## Использование в нашем пайплайне

| Параметр | Значение |
|----------|----------|
| Вызывается из | `mcp-kb-server.py` (после Qdrant-поиска) |
| Порядок | embedding search (top_k*4) -> RRF merge -> **reranker** -> top_k |
| MAX_PER_FILE | 3 (максимум 3 чанка из одного файла) |
| Включение | `RERANK_ENABLED=true` в `.env` |
| Качество с reranker | P@5 = 0.96 |
| Качество без reranker | P@5 ~ 0.78 |

## Links (internal)

- [[infra_all_instruments/docs/neural-networks/cards/qwen3-embedding-8b__20260220190000|Qwen3-Embedding-8B (парная embedding-модель)]]
- [[infra_all_instruments/docs/neural-networks/by-type/embedding__20260210220400-10|Embedding модели (индекс)]]
