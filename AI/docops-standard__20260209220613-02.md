---
id: 20260209220613-02
title: DocOps-Standard — полный регламент ведения документации
summary: >
  Полный стандарт DocOps: атомарность, YAML-заголовок, именование файлов и ID, Obsidian-ссылки, блок Links (internal), статусы и lifecycle, ai_weight, политика точности. Используется как канон во всех проектах.
type: process
status: active
tags: [docops/standard, docops/rules, docops/yaml]
source: claude-opus-4-6
ai_weight: high
created: 2026-02-09
updated: 2026-02-09
depends_on: [docops-core__20260209220613-01]
---
# DOCOPS-STANDARD

## 0) ОБЛАСТЬ ПРИМЕНЕНИЯ

Настоящий регламент устанавливает обязательные требования к ведению документации во всех проектах. Исполнение ОБЯЗАТЕЛЬНО для всех AI-агентов и участников. При противоречиях с другими источниками приоритет у DocOps-Standard и связанных allowlist-документов. Исключения не допускаются без явного указания в `AGENTS.md`.

## 1) АТОМАРНОСТЬ (ОБЯЗАТЕЛЬНАЯ)

- Один файл = одна ключевая мысль / решение / процесс / спецификация.
- Делить на несколько файлов, если в документе больше одной самостоятельной цели или смешаны разные типы контента.
- Каждый файл должен ссылаться на соседние атомы через Obsidian links и иметь понятную роль через `type` + `summary`.

## 2) YAML-ЗАГОЛОВОК (ОБЯЗАТЕЛЬНЫЙ)

Каждый `.md` документ начинается с YAML и содержит 10 обязательных полей:

```yaml
---
id: 20260208153022-01
title: Короткий человекочитаемый заголовок
summary: >
  2–4 строки: что это за документ и когда его читать.
type: spec
status: active
tags: [eng/workflow, platform/n8n]
source: roman
ai_weight: normal
created: 2026-02-08
updated: 2026-02-08
---
```

Правила заполнения:
- `title` — ориентирован на человека, может отличаться от имени файла.
- `summary` — достаточен для решения «читать или нет».
- `tags` — строго из глобального реестра `tags.yml` (см. ниже §8a). 3-5 тегов, не дублировать type и status.
- `source` — строго из allowlist ([[source-allowlist__20260209220613-04|Source-Allowlist]]).
- `type` и `status` — строго из allowlist ([[docops-schema__20260209220613-03|DocOps-Schema]]).
- `ai_weight` — `high` / `normal` / `low`.
- `created/updated` — формат `YYYY-MM-DD`. Обновлять `updated` при смысловых изменениях.

## 3) ИМЕНОВАНИЕ ФАЙЛОВ И ID

### ФОРМАТ ИМЕНИ ФАЙЛА
Человекочитаемый slug + `__` + ID-хвост:

```
name-slug__YYYYMMDDhhmmss-XX.md
```

### ПРАВИЛО ID
- Базовый: `YYYYMMDDhhmmss`
- Если несколько в одну секунду: суффикс `-01`, `-02`, …
- ID в YAML (`id:`) должен совпадать с ID в имени файла.
- После создания ID не изменяется.

### ИСКЛЮЧЕНИЯ
Tool-entrypoint файлы (`AGENTS.md`, `CLAUDE.md`) имеют фиксированные имена без ID.

## 4) ССЫЛКИ: OBSIDIAN-ФОРМАТ

### ФОРМАТ ВНУТРЕННИХ ССЫЛОК
Только Obsidian: `[[path/to/file|label]]`

- **target** = точное имя файла с ID-хвостом
- **label** = человекочитаемое название

Пример: `[[docops-core__20260208143000-01|DocOps-Core]]`

### БЛОК LINKS (INTERNAL)
Если документ содержит внутренние ссылки, в конце обязателен:

```md
## Links (internal)
- [[target|Label]] — зачем ссылка
```

### ВНЕШНИЕ ИСТОЧНИКИ
При наличии — отдельный блок:

```md
## Refs (external)
- Название — URL — зачем
```

## 5) ЦЕЛОСТНОСТЬ ПРИ RENAME/DELETE

### ПЕРЕИМЕНОВАНИЕ
1. Обновить все `[[links]]`, указывающие на файл.
2. Проверить отсутствие битых ссылок.

### УДАЛЕНИЕ
Предпочтительно не удалять — ставить `status: archived`. Если удаление неизбежно — создать tombstone-документ с перенаправлением.

## 6) СТАТУСЫ И LIFECYCLE

- `draft` → `active`: документ готов к использованию.
- `active` → `archived`: документ заменён или утратил актуальность.
- При замене — старый получает `status: archived`.

## 7) AI_WEIGHT: ПРИОРИТИЗАЦИЯ КОНТЕКСТА

- `high` — канон: решения, регламенты, индексы, актуальные спецификации.
- `normal` — рабочие документы: заметки, текущие задачи, черновики.
- `low` — архив / история / низкий приоритет.

AI и агенты: сначала `high`, затем `normal`, `low` — только при необходимости.

## 8) PROGRESSIVE ENRICHMENT — ДОЗАПОЛНЕНИЕ ЗАГОЛОВКОВ

AI-агент дозаполняет пустые YAML-поля **при каждом касании файла**. Тихо, без отдельного уведомления.

### ДВА РЕЖИМА

| Касание | Триггер | Действие |
|---------|---------|----------|
| **READ** | AI прочитал файл (для контекста, анализа, ответа) | Дозаполнить пустые поля. НЕ менять `updated` |
| **EDIT** | AI изменил содержимое файла | Дозаполнить пустые поля + обновить `updated` |

### КАКИЕ ПОЛЯ ДОЗАПОЛНЯТЬ

| Поле | При READ | При EDIT | Как |
|------|----------|----------|-----|
| `summary` | да, если пусто | да, если пусто | 1-2 предложения по содержимому |
| `tags` | да, если пусто | да, если пусто | 3-5 тегов из `tags.yml` (см. §8a) |
| `ai_weight` | да, если отсутствует | да, если отсутствует | Оценить: high / normal / low |
| `type` | да, если отсутствует | да, если отсутствует | Определить из allowlist |
| `updated` | нет | да | Текущая дата `YYYY-MM-DD` |

### ЧТО НЕ ТРОГАТЬ

- `id`, `created` — неизменяемые.
- `title`, `source`, `status` — устанавливаются осознанно при создании.
- **Любое уже заполненное поле** — не перезаписывать. Обогащение только для пустых/отсутствующих.

### 8A) АЛГОРИТМ ТЕГОВКИ

Глобальный реестр тегов: `tags.yml` в корне AgentOps (единый для всех проектов).

**При назначении тегов:**

1. Прочитать `tags.yml` → секция `domains` (группированный реестр).
2. Подобрать 3-5 тегов из существующих доменов по содержимому документа.
3. Если точного тега нет → проверить `aliases` (может, есть синоним).
4. Если действительно нужен новый тег → проверить `stoplist`.
5. Если не в stoplist → использовать и добавить в `tags.yml` в подходящий домен.

**Принципы:**
- **Формат: `group/tag`** (иерархический). Плоские теги запрещены.
- 8 доменов: `platform/`, `ai/`, `docops/`, `eng/`, `process/`, `content/`, `biz/`, `company/`.
- Пример: `platform/n8n`, `eng/workflow`, `biz/crm`, `content/шаблон`.
- Tech/platform теги — на английском (`platform/docker`, `eng/api`).
- Business/domain теги — на языке проекта (`biz/продажи`, `company/команда`).
- Не переводить устоявшиеся термины (`biz/hr`, `biz/crm`, `biz/seo`).
- Не создавать теги из множественного числа, если есть единственное.
- Проектно-локальные теги (`дело/втб`, `документ/иск`) — только внутри проекта, где они описаны в `tags.yml` как project-local convention.

## 9) ПОДДЕРЖКА ТЕГОВ — АВТОМАТИЗАЦИЯ

Три роли в поддержке тегов:

| Кто | Что делает | Когда |
|-----|-----------|-------|
| **Скрипт** | Нормализация: alias→canonical, stoplist, dedup, lowercase | Автоматически, каждый час (`--since 2h`) |
| **AI** | Генерация тегов по содержимому (progressive enrichment §8) | При касании файла |
| **Человек** | Ревью unknown-тегов, расширение `tags.yml` | По необходимости |

**Цикл:** AI пишет теги → скрипт нормализует → человек ревьюит дрифт.

- Скрипт: `normalize-tags.py --since 2h --apply --quiet --log ~/.docops/tag-maintain.log`
- Расписание: `com.agentops.tag-maintain.plist` (launchd, каждый час)
- Логи: `~/.docops/tag-maintain.log`

AI **не** должен нормализовать теги вручную — это задача скрипта. AI ставит теги из `tags.yml` как есть.

## 10) ПОЛИТИКА ТОЧНОСТИ

- ЗАПРЕЩЕНО создавать несуществующие ссылки, файлы, ID.
- ЗАПРЕЩЕНО выдумывать факты. Нет данных — зафиксировать как гипотезу.
- ЗАПРЕЩЕНО выдавать черновик за канон: для этого существуют `status` и `type`.

---

## LINKS (INTERNAL)

- [[docops-core__20260209220613-01|DocOps-Core]] — ядро правил документации
- [[docops-schema__20260209220613-03|DocOps-Schema]] — схема YAML и allowlist type/status
- [[source-allowlist__20260209220613-04|Source-Allowlist]] — allowlist допустимых source
- [[agents-format__20260209220613-05|AGENTS-Format]] — стандарт AGENTS.md и tri-state режимов
- [[adapters__20260209220613-06|Adapters]] — адаптеры правил под инструменты
